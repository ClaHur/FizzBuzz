//User input FizzBuzz
const tools = require('./stretchFunc.js'); //pull functions from function file
console.log("~~~Welcome to Buzz your own Fizz!~~~")
const prompt = require('prompt-sync')(); //require prompt sync for user inputs
var max = "";
//Take maximum number input from user
while (!Number.isInteger(max)) {
    max = prompt('What number would you like to go up to?');
    max = parseFloat(max);
    if (!Number.isInteger(max)) {
        console.log("Invalid input, please try again.")
    }
}

//MAKE A RULE
//Three rule options: Append, Replace, Reverse
//Append adds the desired word to the end of the value to be logged
//Replace replaces the whole log value with the desired word
//Reverse reverses the order of the words within the log value
console.log("It's time to apply some rules!");
console.log("You will choose a number, and then a corresponding rule.");
console.log("APPEND adds the desired word to the end of the string.")
console.log("REPLACE replaces the string with the desired word.")
console.log("REVERSE reverses the order of the words within the string.")

//User chooses rules
var applyRules = "Y", rules = [];
while (applyRules == "Y") {
    rules.push(tools.addRule()); //Add rule using function from stretchFunc file
    applyRules = prompt('Would you like to apply another rule? (Y/N)');
}

//TO CONSIDER: What happens if user applies same number twice?
//Replaces followed by appends will include the append

var log;
for (var i = 1; i <= max; i++) { //Log until hitting user's maximum number
    log = "";
    var useNum,useRule,useWord;
    for (var j = 0; j < rules.length; j++) {
        log=tools.runRule(log,rules,i,j); //For each number, check and apply each rule provided using function from stretchFunc file
    }
    log.length > 1 ? console.log(log) : console.log(i); //Log the generated string, or the number if no rules apply
}

